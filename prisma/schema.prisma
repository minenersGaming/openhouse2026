generator client {
  provider      = "prisma-client-js"
  binaryTargets = ["native", "rhel-openssl-3.0.x"]
  output        = "../generated/prisma"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

model Booking {
  id           String   @id @default(uuid()) @map("_id")
  registerId   String   @unique
  username     String
  fullname     String
  surname      String
  userStatus   String
  school       String
  grade        String
  receivedInfo String[]
  purpose      String[]

  userId String @unique
  user   User   @relation(fields: [userId], references: [id])
}

type CheckInEntry {
  door      String?
  checkIn   DateTime?
  date      DateTime?
  isCheckIn Boolean   @default(false)
}

type CheckIn {
  day1 CheckInEntry?
  day2 CheckInEntry?
}

model User {
  id            String   @id @map("_id")
  name          String
  email         String
  emailVerified Boolean  @default(false)
  image         String?
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt

  register  Booking?
  isStaff   Boolean  @default(false)
  isBooking Boolean  @default(false)
  checkIn   CheckIn?

  sessions Session[]
  accounts Account[]

  @@unique([email])
  @@map("user")
}

model Session {
  id        String   @id @map("_id")
  expiresAt DateTime
  token     String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  ipAddress String?
  userAgent String?
  userId    String
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([token])
  @@index([userId])
  @@map("session")
}

model Account {
  id                    String    @id @map("_id")
  accountId             String
  providerId            String
  userId                String
  user                  User      @relation(fields: [userId], references: [id], onDelete: Cascade)
  accessToken           String?
  refreshToken          String?
  idToken               String?
  accessTokenExpiresAt  DateTime?
  refreshTokenExpiresAt DateTime?
  scope                 String?
  password              String?
  createdAt             DateTime  @default(now())
  updatedAt             DateTime  @updatedAt

  @@index([userId])
  @@map("account")
}

model Verification {
  id         String   @id @map("_id")
  identifier String
  value      String
  expiresAt  DateTime
  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt

  @@index([identifier])
  @@map("verification")
}

model Gifted {
  id          String @id @default(auto()) @map("_id") @db.ObjectId
  key         String @unique
  status      String
  tag         String
  name        String
  thainame    String
  members     String
  ig          String
  fb          String
  others      String
  admissions  String
  courses     String
  interests   String
  captureimg1 String
  descimg1    String
  captureimg2 String
  descimg2    String
  captureimg3 String
  descimg3    String
  reviews     Json? // Store reviews as JSON
  userEmail   String
}

model Club {
  id          String  @id @default(auto()) @map("_id") @db.ObjectId
  key         String  @unique
  status      String
  tag         String
  clubKey     String
  name        String?
  thainame    String
  members     String?
  ig          String?
  fb          String?
  others      String?
  activities  String?
  benefits    String?
  working     String?
  captureimg1 String?
  descimg1    String?
  captureimg2 String?
  descimg2    String?
  captureimg3 String?
  descimg3    String?
  logo        String?
  reviews     Json?
  userEmail   String
}

model Organization {
  id          String @id @default(auto()) @map("_id") @db.ObjectId
  key         String @unique
  status      String
  tag         String
  name        String
  thainame    String
  members     String
  ig          String
  fb          String
  others      String
  activities  String
  position    String
  working     String
  captureimg1 String
  descimg1    String
  captureimg2 String
  descimg2    String
  captureimg3 String
  descimg3    String
  reviews     Json? // Store reviews as JSON
  userEmail   String
}

model Program {
  id          String @id @default(auto()) @map("_id") @db.ObjectId
  key         String @unique
  status      String
  tag         String
  name        String
  thainame    String
  members     String
  ig          String
  fb          String
  others      String
  admissions  String
  courses     String
  interests   String
  captureimg1 String
  descimg1    String
  captureimg2 String
  descimg2    String
  captureimg3 String
  descimg3    String
  reviews     Json? // Store reviews as JSON
  userEmail   String
}

/**
 * model User {
 * id                   String    @id @map("_id")
 * name                 String
 * email                String
 * emailVerified        Boolean   @default(false)
 * image                String?
 * createdAt            DateTime  @default(now())
 * updatedAt            DateTime  @updatedAt
 * booking              Booking?
 * sessions             Session[]
 * accounts             Account[]
 * @@unique([email])
 * @@map("user")
 * }
 * model Session {
 * id        String   @id @map("_id")
 * expiresAt DateTime
 * token     String
 * createdAt DateTime @default(now())
 * updatedAt DateTime @updatedAt
 * ipAddress String?
 * userAgent String?
 * userId    String
 * user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)
 * @@unique([token])
 * @@index([userId])
 * @@map("session")
 * }
 * model Account {
 * id                    String    @id @map("_id")
 * accountId             String
 * providerId            String
 * userId                String
 * user                  User      @relation(fields: [userId], references: [id], onDelete: Cascade)
 * accessToken           String?
 * refreshToken          String?
 * idToken               String?
 * accessTokenExpiresAt  DateTime?
 * refreshTokenExpiresAt DateTime?
 * scope                 String?
 * password              String?
 * createdAt             DateTime  @default(now())
 * updatedAt             DateTime  @updatedAt
 * @@index([userId])
 * @@map("account")
 * }
 * model Verification {
 * id         String   @id @map("_id")
 * identifier String
 * value      String
 * expiresAt  DateTime
 * createdAt  DateTime @default(now())
 * updatedAt  DateTime @updatedAt
 * @@index([identifier])
 * @@map("verification")
 * }
 * model Booking {
 * id          String   @id @map("_id")
 * userId      String   @unique
 * user        User     @relation(fields: [userId], references: [id], onDelete: Cascade)
 * queueNumber Int      @unique
 * qr          String   @unique
 * checkedIn   Boolean  @default(false)
 * createdAt   DateTime @default(now())
 * @@map("booking")
 * }
 */
